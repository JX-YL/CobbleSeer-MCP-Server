# 规则引擎技能生成器 - 测试指南

> **重要：** 测试前请重启Cursor，让MCP服务器重新加载新工具！

---

## 🎯 快速开始

### **步骤1：重启Cursor**

1. 完全关闭Cursor
2. 重新打开Cursor
3. 等待MCP服务器初始化（几秒钟）

### **步骤2：验证工具可用**

在Cursor中输入：
```
请列出可用的 cobbleseer 工具
```

应该看到新的 `create_move` 工具！

---

## 🧪 测试用例

### **测试1：电系物理攻击 + 麻痹** ⚡

**在Cursor中输入：**
```
请使用 create_move 工具创建一个技能：
- name: "Thunder Strike"
- type: "Electric"
- category: "Physical"
- base_power: 90
- accuracy: 100
- pp: 15
- priority: 1
- effect: "paralyze"
- effect_chance: 10
```

**预期结果：**
```javascript
{
  num: -10001,
  name: "Thunder Strike",
  type: "Electric",
  category: "Physical",
  basePower: 90,
  accuracy: 100,
  pp: 15,
  priority: 1,
  flags: {protect: 1, mirror: 1, metronome: 1, contact: 1},
  secondary: {
    chance: 10,
    status: "par"
  },
  target: "normal",
  shortDesc: "Usually goes first. 10% chance to paralyze."
}
```

✅ **验证点：**
- 优先度为+1
- 追加效果为10%麻痹（status: "par"）
- 描述包含"Usually goes first"
- 所有字段格式正确

---

### **测试2：草系吸血技能** 🌿

**在Cursor中输入：**
```
请使用 create_move 工具创建一个技能：
- name: "Drain Leaf"
- type: "Grass"
- category: "Special"
- base_power: 75
- accuracy: 100
- pp: 10
- effect: "drain"
- effect_value: 50
```

**预期结果：**
```javascript
{
  num: -10001,
  name: "Drain Leaf",
  type: "Grass",
  category: "Special",
  basePower: 75,
  accuracy: 100,
  pp: 10,
  priority: 0,
  flags: {protect: 1, mirror: 1, metronome: 1, heal: 1},
  drain: [50, 100],
  secondary: null,
  target: "normal",
  shortDesc: "User recovers HP equal to damage dealt."
}
```

✅ **验证点：**
- 有 `drain: [50, 100]` 字段（吸血50%）
- flags中包含 `heal: 1`
- secondary为null（吸血不是secondary效果）

---

### **测试3：能力提升（变化技能）** 💪

**在Cursor中输入：**
```
请使用 create_move 工具创建一个技能：
- name: "Power Up"
- type: "Normal"
- category: "Status"
- effect: "boost_attack"
- effect_value: 2
- pp: 20
```

**预期结果：**
```javascript
{
  num: -10001,
  name: "Power Up",
  type: "Normal",
  category: "Status",
  basePower: 0,
  accuracy: 100,
  pp: 20,
  priority: 0,
  flags: {protect: 1, mirror: 1, metronome: 1, snatch: 1},
  boosts: {atk: 2},
  secondary: null,
  target: "normal",
  shortDesc: "Boost Attack."
}
```

✅ **验证点：**
- basePower为0（变化技能）
- 有 `boosts: {atk: 2}` 字段（不是secondary）
- flags中包含 `snatch: 1`（变化技能特有）

---

### **测试4：反伤技能** 💥

**在Cursor中输入：**
```
请使用 create_move 工具创建一个技能：
- name: "Flame Crash"
- type: "Fire"
- category: "Physical"
- base_power: 120
- accuracy: 100
- pp: 15
- effect: "recoil"
- effect_value: 33
```

**预期结果：**
```javascript
{
  num: -10001,
  name: "Flame Crash",
  type: "Fire",
  category: "Physical",
  basePower: 120,
  accuracy: 100,
  pp: 15,
  priority: 0,
  flags: {protect: 1, mirror: 1, metronome: 1, contact: 1},
  recoil: [1, 3],
  secondary: null,
  target: "normal",
  shortDesc: "User takes recoil damage."
}
```

✅ **验证点：**
- 有 `recoil: [1, 3]` 字段（1/3反伤）
- effect_value=33 正确转换为 [1, 3]

---

### **测试5：简单攻击（无效果）** 👊

**在Cursor中输入：**
```
请使用 create_move 工具创建一个技能：
- name: "Quick Attack"
- type: "Normal"
- category: "Physical"
- base_power: 40
- accuracy: 100
- pp: 30
- priority: 1
```

**预期结果：**
```javascript
{
  num: -10001,
  name: "Quick Attack",
  type: "Normal",
  category: "Physical",
  basePower: 40,
  accuracy: 100,
  pp: 30,
  priority: 1,
  flags: {protect: 1, mirror: 1, metronome: 1, contact: 1},
  secondary: null,
  target: "normal",
  shortDesc: "Usually goes first."
}
```

✅ **验证点：**
- 没有追加效果
- secondary为null
- 描述简洁明了

---

## 📊 测试检查表

请在Cursor中依次测试以上5个用例，并填写结果：

- [ ] 测试1：电系物理攻击 + 麻痹 - 结果：______
- [ ] 测试2：草系吸血技能 - 结果：______
- [ ] 测试3：能力提升（变化技能） - 结果：______
- [ ] 测试4：反伤技能 - 结果：______
- [ ] 测试5：简单攻击（无效果） - 结果：______

**总体评价：** _____/5 通过

---

## 🎉 测试通过标准

如果所有5个测试都：
- ✅ 生成成功（success: true）
- ✅ 代码格式正确（JavaScript对象）
- ✅ 所有字段都存在且合理
- ✅ 效果描述清晰准确

**那么规则引擎就可以发布了！** 🚀

---

## 💡 进阶测试（可选）

尝试组合不同参数，测试边界情况：

1. **极高威力技能**
   - base_power: 250
   
2. **必中技能**
   - accuracy: 0（表示必中）
   
3. **多级能力提升**
   - effect: "boost_attack"
   - effect_value: 3
   
4. **高优先度**
   - priority: 5
   
5. **自定义描述**
   - description: "Custom description here"

---

## 🆘 常见问题

### **Q: 工具列表中看不到 create_move**
A: 请确保已重启Cursor，并等待MCP服务器完全启动（查看右下角状态）

### **Q: 调用工具时报错**
A: 检查参数是否正确，特别是：
- `type` 必须是18种属性之一（Electric, Fire, Water等）
- `category` 必须是 Physical/Special/Status
- `effect` 必须是支持的效果类型（或null）

### **Q: 生成的代码有格式问题**
A: 这是bug，请报告详细信息

---

**准备好了吗？开始测试吧！** 🎮

